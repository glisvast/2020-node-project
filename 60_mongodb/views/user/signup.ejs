<!DOCTYPE html>
<html lang="en">
  <%- include("../header"); %>
  <body>
    <%- include("../menu"); %>
    <!-- Default form register -->
    <form
      class="text-center border border-light p-5"
      action="#!"
      id="signupform"
    >
      <p class="h4 mb-4">Sign up</p>

      <div class="form-row mb-4">
        <div class="col">
          <input
            type="text"
            id="name"
            required
            class="form-control"
            placeholder="Name"
          />
        </div>
      </div>

      <!-- E-mail -->
      <input
        type="email"
        id="email"
        required
        class="form-control mb-4"
        placeholder="E-mail"
      />

      <!-- Password -->
      <input
        type="password"
        id="password"
        required
        class="form-control"
        placeholder="Password"
        aria-describedby="defaultRegisterFormPasswordHelpBlock"
      />
      <small
        id="defaultRegisterFormPasswordHelpBlock"
        class="form-text text-muted mb-4"
      >
        At least 8 characters and 1 digit
      </small>

      <!-- Sign up button -->
      <button class="btn btn-info my-4 btn-block" type="submit">Sign up</button>

      <!-- Terms ofs service -->
      <p>
        By clicking <em>Sign up</em> you agree to our
        <a href="" target="_blank">terms of service</a>
      </p>
    </form>

    <!-- Default form register -->
    <%- include("../footer"); %>
    <script>
      $(function () {
        $("#signupform").submit((event) => {
          event.preventDefault();
          // 등록
          const name = $("#name").val();
          const email = $("#email").val();
          const password = $("#password").val();
          $.ajax({
            url: "/api/user/signup",
            type: "POST",
            data: { name, email, password },
          })
            .done(() => {
              location.href = "/api/user/login";
            })
            .fail((request, status, error) => {
              alert(request.responseText);
            });
        });
      });
    </script>
  </body>
</html>
